#!/usr/local/bin/python3

import requests
import json
import hashlib
import pyperclip

import difflib

THING0 = "0x608060405234801561001057600080fd5b50600436106100625760003560e01c8063274abf34146100675780632dc7d74c1461009757806348c66e13146100b557806383c592cf146100d1578063af7568dd146100ed578063dd01ba0b1461010b575b600080fd5b610081600480360381019061007c91906106e0565b610127565b60405161008e9190610892565b60405180910390f35b61009f610182565b6040516100ac9190610817565b60405180910390f35b6100cf60048036038101906100ca919061076e565b6101ab565b005b6100eb60048036038101906100e691906107bd565b6102e4565b005b6100f5610456565b6040516101029190610892565b60405180910390f35b610125600480360381019061012091906107bd565b610507565b005b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002054905092915050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b82600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000838152602001908152602001600020600082825461020b9190610903565b9250508190555082600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000838152602001908152602001600020600082825461027291906108ad565b92505081905550808273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f296aca09e6f616abedcd9cd45ac378207310452b7a713289374fd1b35e2c2fbe866040516102d79190610892565b60405180910390a4505050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b815260040161034193929190610832565b602060405180830381600087803b15801561035b57600080fd5b505af115801561036f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610393919061071c565b61039c57600080fd5b81600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002060008282546103fc91906108ad565b92505081905550803373ffffffffffffffffffffffffffffffffffffffff167f9e3e33edf5dcded4adabc51b1266225d00fa41516bfcad69513fa4eca69519da8460405161044a9190610892565b60405180910390a35050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016104b29190610817565b60206040518083038186803b1580156104ca57600080fd5b505afa1580156104de573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105029190610745565b905090565b81600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002060008282546105679190610903565b9250508190555060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb33846040518363ffffffff1660e01b81526004016105c9929190610869565b602060405180830381600087803b1580156105e357600080fd5b505af11580156105f7573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061061b919061071c565b61062457600080fd5b803373ffffffffffffffffffffffffffffffffffffffff167fa131d16963736e4c641f27a7f82f2e350b5971e555ae06ae906892bbba0a09398460405161066b9190610892565b60405180910390a35050565b600081359050610686816109b8565b92915050565b60008151905061069b816109cf565b92915050565b6000813590506106b0816109e6565b92915050565b6000813590506106c5816109fd565b92915050565b6000815190506106da816109fd565b92915050565b600080604083850312156106f357600080fd5b600061070185828601610677565b9250506020610712858286016106a1565b9150509250929050565b60006020828403121561072e57600080fd5b600061073c8482850161068c565b91505092915050565b60006020828403121561075757600080fd5b6000610765848285016106cb565b91505092915050565b60008060006060848603121561078357600080fd5b6000610791868287016106b6565b93505060206107a286828701610677565b92505060406107b3868287016106a1565b9150509250925092565b600080604083850312156107d057600080fd5b60006107de858286016106b6565b92505060206107ef858286016106a1565b9150509250929050565b61080281610937565b82525050565b6108118161097f565b82525050565b600060208201905061082c60008301846107f9565b92915050565b600060608201905061084760008301866107f9565b61085460208301856107f9565b6108616040830184610808565b949350505050565b600060408201905061087e60008301856107f9565b61088b6020830184610808565b9392505050565b60006020820190506108a76000830184610808565b92915050565b60006108b88261097f565b91506108c38361097f565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156108f8576108f7610989565b5b828201905092915050565b600061090e8261097f565b91506109198361097f565b92508282101561092c5761092b610989565b5b828203905092915050565b60006109428261095f565b9050919050565b60008115159050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6109c181610937565b81146109cc57600080fd5b50565b6109d881610949565b81146109e357600080fd5b50565b6109ef81610955565b81146109fa57600080fd5b50565b610a068161097f565b8114610a1157600080fd5b5056fea2646970667358221220538f18bc2a97f46704e7b39af981f0aae57c075e0ae548a9827f4f3536991ddb64736f6c63430008010033"
THING1 = "0x608060405234801561001057600080fd5b50600436106100625760003560e01c8063274abf34146100675780632dc7d74c1461009757806348c66e13146100b557806383c592cf146100d1578063af7568dd146100ed578063dd01ba0b1461010b575b600080fd5b610081600480360381019061007c91906106e0565b610127565b60405161008e9190610892565b60405180910390f35b61009f610182565b6040516100ac9190610817565b60405180910390f35b6100cf60048036038101906100ca919061076e565b6101ab565b005b6100eb60048036038101906100e691906107bd565b6102e4565b005b6100f5610456565b6040516101029190610892565b60405180910390f35b610125600480360381019061012091906107bd565b610507565b005b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002054905092915050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b82600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000838152602001908152602001600020600082825461020b9190610903565b9250508190555082600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000838152602001908152602001600020600082825461027291906108ad565b92505081905550808273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f296aca09e6f616abedcd9cd45ac378207310452b7a713289374fd1b35e2c2fbe866040516102d79190610892565b60405180910390a4505050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b815260040161034193929190610832565b602060405180830381600087803b15801561035b57600080fd5b505af115801561036f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610393919061071c565b61039c57600080fd5b81600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002060008282546103fc91906108ad565b92505081905550803373ffffffffffffffffffffffffffffffffffffffff167f9e3e33edf5dcded4adabc51b1266225d00fa41516bfcad69513fa4eca69519da8460405161044a9190610892565b60405180910390a35050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016104b29190610817565b60206040518083038186803b1580156104ca57600080fd5b505afa1580156104de573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105029190610745565b905090565b81600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002060008282546105679190610903565b9250508190555060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb33846040518363ffffffff1660e01b81526004016105c9929190610869565b602060405180830381600087803b1580156105e357600080fd5b505af11580156105f7573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061061b919061071c565b61062457600080fd5b803373ffffffffffffffffffffffffffffffffffffffff167fa131d16963736e4c641f27a7f82f2e350b5971e555ae06ae906892bbba0a09398460405161066b9190610892565b60405180910390a35050565b600081359050610686816109b8565b92915050565b60008151905061069b816109cf565b92915050565b6000813590506106b0816109e6565b92915050565b6000813590506106c5816109fd565b92915050565b6000815190506106da816109fd565b92915050565b600080604083850312156106f357600080fd5b600061070185828601610677565b9250506020610712858286016106a1565b9150509250929050565b60006020828403121561072e57600080fd5b600061073c8482850161068c565b91505092915050565b60006020828403121561075757600080fd5b6000610765848285016106cb565b91505092915050565b60008060006060848603121561078357600080fd5b6000610791868287016106b6565b93505060206107a286828701610677565b92505060406107b3868287016106a1565b9150509250925092565b600080604083850312156107d057600080fd5b60006107de858286016106b6565b92505060206107ef858286016106a1565b9150509250929050565b61080281610937565b82525050565b6108118161097f565b82525050565b600060208201905061082c60008301846107f9565b92915050565b600060608201905061084760008301866107f9565b61085460208301856107f9565b6108616040830184610808565b949350505050565b600060408201905061087e60008301856107f9565b61088b6020830184610808565b9392505050565b60006020820190506108a76000830184610808565b92915050565b60006108b88261097f565b91506108c38361097f565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156108f8576108f7610989565b5b828201905092915050565b600061090e8261097f565b91506109198361097f565b92508282101561092c5761092b610989565b5b828203905092915050565b60006109428261095f565b9050919050565b60008115159050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6109c181610937565b81146109cc57600080fd5b50565b6109d881610949565b81146109e357600080fd5b50565b6109ef81610955565b81146109fa57600080fd5b50565b610a068161097f565b8114610a1157600080fd5b5056fe"
THING2 = "0x608060405234801561001057600080fd5b50600436106100625760003560e01c8063274abf34146100675780632dc7d74c1461009757806348c66e13146100b557806383c592cf146100d1578063af7568dd146100ed578063dd01ba0b1461010b575b600080fd5b610081600480360381019061007c91906106e0565b610127565b60405161008e9190610892565b60405180910390f35b61009f610182565b6040516100ac9190610817565b60405180910390f35b6100cf60048036038101906100ca919061076e565b6101ab565b005b6100eb60048036038101906100e691906107bd565b6102e4565b005b6100f5610456565b6040516101029190610892565b60405180910390f35b610125600480360381019061012091906107bd565b610507565b005b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002054905092915050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b82600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000838152602001908152602001600020600082825461020b9190610903565b9250508190555082600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000838152602001908152602001600020600082825461027291906108ad565b92505081905550808273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f296aca09e6f616abedcd9cd45ac378207310452b7a713289374fd1b35e2c2fbe866040516102d79190610892565b60405180910390a4505050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b815260040161034193929190610832565b602060405180830381600087803b15801561035b57600080fd5b505af115801561036f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610393919061071c565b61039c57600080fd5b81600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002060008282546103fc91906108ad565b92505081905550803373ffffffffffffffffffffffffffffffffffffffff167f9e3e33edf5dcded4adabc51b1266225d00fa41516bfcad69513fa4eca69519da8460405161044a9190610892565b60405180910390a35050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016104b29190610817565b60206040518083038186803b1580156104ca57600080fd5b505afa1580156104de573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105029190610745565b905090565b81600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002060008282546105679190610903565b9250508190555060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb33846040518363ffffffff1660e01b81526004016105c9929190610869565b602060405180830381600087803b1580156105e357600080fd5b505af11580156105f7573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061061b919061071c565b61062457600080fd5b803373ffffffffffffffffffffffffffffffffffffffff167fa131d16963736e4c641f27a7f82f2e350b5971e555ae06ae906892bbba0a09398460405161066b9190610892565b60405180910390a35050565b600081359050610686816109b8565b92915050565b60008151905061069b816109cf565b92915050565b6000813590506106b0816109e6565b92915050565b6000813590506106c5816109fd565b92915050565b6000815190506106da816109fd565b92915050565b600080604083850312156106f357600080fd5b600061070185828601610677565b9250506020610712858286016106a1565b9150509250929050565b60006020828403121561072e57600080fd5b600061073c8482850161068c565b91505092915050565b60006020828403121561075757600080fd5b6000610765848285016106cb565b91505092915050565b60008060006060848603121561078357600080fd5b6000610791868287016106b6565b93505060206107a286828701610677565b92505060406107b3868287016106a1565b9150509250925092565b600080604083850312156107d057600080fd5b60006107de858286016106b6565b92505060206107ef858286016106a1565b9150509250929050565b61080281610937565b82525050565b6108118161097f565b82525050565b600060208201905061082c60008301846107f9565b92915050565b600060608201905061084760008301866107f9565b61085460208301856107f9565b6108616040830184610808565b949350505050565b600060408201905061087e60008301856107f9565b61088b6020830184610808565b9392505050565b60006020820190506108a76000830184610808565b92915050565b60006108b88261097f565b91506108c38361097f565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156108f8576108f7610989565b5b828201905092915050565b600061090e8261097f565b91506109198361097f565b92508282101561092c5761092b610989565b5b828203905092915050565b60006109428261095f565b9050919050565b60008115159050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6109c181610937565b81146109cc57600080fd5b50565b6109d881610949565b81146109e357600080fd5b50565b6109ef81610955565b81146109fa57600080fd5b50565b610a068161097f565b8114610a1157600080fd5b5056fe"
THING3 = "0x608060405234801561001057600080fd5b50600436106100625760003560e01c8063274abf34146100675780632dc7d74c1461009757806348c66e13146100b557806383c592cf146100d1578063af7568dd146100ed578063dd01ba0b1461010b575b600080fd5b610081600480360381019061007c9190610710565b610127565b60405161008e9190610769565b60405180910390f35b61009f610182565b6040516100ac9190610793565b60405180910390f35b6100cf60048036038101906100ca91906107da565b6101ab565b005b6100eb60048036038101906100e6919061082d565b6102e4565b005b6100f5610456565b6040516101029190610769565b60405180910390f35b6101256004803603810190610120919061082d565b610507565b005b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002054905092915050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b82600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000838152602001908152602001600020600082825461020b919061089c565b9250508190555082600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000838152602001908152602001600020600082825461027291906108d0565b92505081905550808273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f296aca09e6f616abedcd9cd45ac378207310452b7a713289374fd1b35e2c2fbe866040516102d79190610769565b60405180910390a4505050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b815260040161034193929190610926565b602060405180830381600087803b15801561035b57600080fd5b505af115801561036f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103939190610995565b61039c57600080fd5b81600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600083815260200190815260200160002060008282546103fc91906108d0565b92505081905550803373ffffffffffffffffffffffffffffffffffffffff167f9e3e33edf5dcded4adabc51b1266225d00fa41516bfcad69513fa4eca69519da8460405161044a9190610769565b60405180910390a35050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016104b29190610793565b60206040518083038186803b1580156104ca57600080fd5b505afa1580156104de573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061050291906109d7565b905090565b81600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008381526020019081526020016000206000828254610567919061089c565b9250508190555060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb33846040518363ffffffff1660e01b81526004016105c9929190610a04565b602060405180830381600087803b1580156105e357600080fd5b505af11580156105f7573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061061b9190610995565b61062457600080fd5b803373ffffffffffffffffffffffffffffffffffffffff167fa131d16963736e4c641f27a7f82f2e350b5971e555ae06ae906892bbba0a09398460405161066b9190610769565b60405180910390a35050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006106a78261067c565b9050919050565b6106b78161069c565b81146106c257600080fd5b50565b6000813590506106d4816106ae565b92915050565b6000819050919050565b6106ed816106da565b81146106f857600080fd5b50565b60008135905061070a816106e4565b92915050565b6000806040838503121561072757610726610677565b5b6000610735858286016106c5565b9250506020610746858286016106fb565b9150509250929050565b6000819050919050565b61076381610750565b82525050565b600060208201905061077e600083018461075a565b92915050565b61078d8161069c565b82525050565b60006020820190506107a86000830184610784565b92915050565b6107b781610750565b81146107c257600080fd5b50565b6000813590506107d4816107ae565b92915050565b6000806000606084860312156107f3576107f2610677565b5b6000610801868287016107c5565b9350506020610812868287016106c5565b9250506040610823868287016106fb565b9150509250925092565b6000806040838503121561084457610843610677565b5b6000610852858286016107c5565b9250506020610863858286016106fb565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006108a782610750565b91506108b283610750565b9250828210156108c5576108c461086d565b5b828203905092915050565b60006108db82610750565b91506108e683610750565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0382111561091b5761091a61086d565b5b828201905092915050565b600060608201905061093b6000830186610784565b6109486020830185610784565b610955604083018461075a565b949350505050565b60008115159050919050565b6109728161095d565b811461097d57600080fd5b50565b60008151905061098f81610969565b92915050565b6000602082840312156109ab576109aa610677565b5b60006109b984828501610980565b91505092915050565b6000815190506109d1816107ae565b92915050565b6000602082840312156109ed576109ec610677565b5b60006109fb848285016109c2565b91505092915050565b6000604082019050610a196000830185610784565b610a26602083018461075a565b939250505056fe"
            
URL = {
    "mainnet": "https://mainnet.infura.io/v3/dfac3d264bdf41cc8b6cc5e81b343979",
    "roppy": "https://ropsten.infura.io/v3/dfac3d264bdf41cc8b6cc5e81b343979",
}

ADDRESSES = [
    # mainnet
    #"0xcB84d72e61e383767C4DFEb2d8ff7f4FB89abc6e",
    "0x23d1bFE8fA50a167816fBD79D7932577c06011f4", # vesting
    "0x195064D33f09e0c42cF98E665D9506e0dC17de68", # staking
    #"0xCd403f722b76366f7d609842C589906ca051310f",

    #testnet
    "0xF0598Cd16FA3bf4c34052923cBE2D34028da0c69",
    "0x0614188938f5C3bD8461D4B413A39eeC2C5f42D9",
    "0xfce2CC92203A266a9C8e67461ae5067c78f67235",
]


ALL_STAKING = {
    "0xF5A3830F002BE78dd801214F5316b677E0355c60", #testnet
    "0x3cCe40e1e47cedf76c03db3E48507f421b575523", #devnet
    "0x7D88CD817227D599815d407D929af18Bb8D57176", #stagnet
    "0xCee201E44ADe5400Ceb0d5924e0802244B6c40f7", #stanet2
    "0xf2cD5C8b8c52f96293338A0AF463a0Bfc602D5bc",
    "0xB5410A4bE4168477c1FeB8B0Fe551D3b8dA9c6AC",
    "0x7896C9491962D5839783CB6e0492ECebd34Bb35F",
    "0x0CdDE7874784733890c6Be3Ce9681E428F603bc8", #MY TESTNET
    "0x85eD131031e385183E980ee86c6F0E8eA4C32C8C", #MY DEVNET
    "0x79F7b66bB2F40c2cA9350Dd6eA7D7A33a3c361B2", #MY STAGNET2
}

ALL_VESTING = {
    "0xe2deBB240b43EDfEBc9c38B67c0894B9A92Bf07c", #testnet
    "0xd751FF6264234cAfAE88e4BF6003878fAB9630a7", #devnet
    "0xfCe6eB272D3d4146A96bC28de71212b327F575fa", #stagnet
    "0x005F13184cf57B9EE49701c8D8c952534c36AcaB", #stanet2,
    "0xd1216AAb948f5FC706Df73df6d71c64CcaA8550a",
    "0x0f4DfA4E66f2C8e6E6d3D78738485519178EEaa8",
    "0x9F10cBeEf03A564Fb914c2010c0Cd55E9BB11406",
    "0xf90244111776b5d6cF440f09C260acc1392EE56f", #MY TESTNET
    "0xfe6D15AA2a15f8eC51194D483A156ED31bC65889", #MY DEVNET
    "0x5d73622D8fF79EeB320870fdd9fB588736784Ad6", #MY STAGNET2
}

ALL_BRIDGE_LOGIC = {
    "0xF009C66c6afC9661143fD7cE1eDb02c1961a6510", #testnet
    "0xE43013C3c2A134AB3782ADEb258669A8566DAD57", #devnet 
    "0xb365125A7fE54f6001CF21C2Bc3b3Bc2a5Cf77E7", #stagnet
    "0xffC1eb64e22fd5E29816c633eE84088EEEe879E5", #stagnet2
}

def getcode(url, address):

    data = {
        "jsonrpc":"2.0",
        "method":"eth_getCode",
        "params": [
            address, "latest",
        ],
        "id": 1,

    }
    r = requests.post(url, json=data)
    if not r.ok:
        return None

    res = r.json()['result']
    return None if res == '0x' else res.strip()


def as_hash(to_hash):
    m = hashlib.sha3_256()
    m.update(bytes.fromhex(to_hash[2:]))
    return m.digest().hex()


def get_hash(url, addr):
    to_json = dict()
    code = getcode(url, addr)
    if code is  None:
        return
    
    code = code.split("a264")
    if len(code) != 2:
        print("ERROR")
        return
    code = code[0]
    
    to_json[addr] = as_hash(code)
    print(f'"{addr}":"{to_json[addr]}",')

def main():
    #url = URL['mainnet-infura']
    url = URL['roppy']


    to_json = dict()

    print("STAKING")
    for addr in ALL_STAKING:
        get_hash(url, addr)

    print("\nVESTING")
    for addr in ALL_VESTING:
        get_hash(url, addr)

    print("\BRIDGE LOGIC")
    for addr in ALL_BRIDGE_LOGIC:
        get_hash(url, addr)


    print("\nMAINNET")
    get_hash(URL['mainnet'], "0x195064D33f09e0c42cF98E665D9506e0dC17de68")
    get_hash(URL['mainnet'], "0x23d1bFE8fA50a167816fBD79D7932577c06011f4")
    get_hash(URL['mainnet'], "0xCd403f722b76366f7d609842C589906ca051310f")


    return


    print( "var contractHashes = map[string]string{")
    

    for addr in ADDRESSES:

        code = getcode(url, addr)
        if code is  None:
            continue
        
        code = code.split("a264")
        if len(code) != 2:
            print("ERROR")
            return
        code = code[0]
        
        to_json[addr] = as_hash(code)
        print(f'"{addr}":"{to_json[addr]}",')

    output = {
        "hashes": to_json
    }

    print("}")

    with open('contract-hashes.json', 'w') as outfile:
        json.dump(output, outfile)
    


if __name__ == "__main__":
    main()